<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Instagram Engagement Toolkit • Clydeside Social</title>
  <style>
    :root{
      --pink:#ff667f;
      --blue:#a9dde8;
      --text:#222;
      --card:#fff;
      --radius:16px;
      --shadow:0 10px 24px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{
      font-family:"Arial Rounded MT Bold", Arial, sans-serif;
      background:var(--blue);
      color:var(--text);
      margin:0; padding:24px;
      display:flex; justify-content:center;
    }
    .wrap{max-width:720px; width:100%}
    .logo{max-width:180px;margin:0 auto 20px;display:block}
    .card{
      background:var(--card); border-radius:var(--radius);
      padding:24px; box-shadow:var(--shadow); margin-bottom:20px;
    }
    h1{font-size:1.6rem; margin:0 0 12px; color:var(--pink)}
    h2{font-size:1.2rem; margin:0 0 8px}
    label{display:block; margin:.75rem 0 .25rem; font-weight:bold}
    input, select{
      width:100%; padding:.7rem .9rem; border:1px solid #ddd; border-radius:16px;
    }
    button{
      margin-top:1rem; padding:.7rem 1rem; border:0; border-radius:999px; cursor:pointer;
      background:linear-gradient(135deg,var(--pink),var(--blue));
      color:#fff; font-weight:bold; font-size:.95rem;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
    }
    button:hover{filter:brightness(1.05)}
    .actions{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}
    #postResult,#monthResult{margin-top:1rem; font-weight:bold; color:var(--pink); white-space:pre-line}
    .muted,.benchmark{font-size:.9rem; opacity:.8; margin-top:.25rem; white-space:pre-line}
    footer{margin-top:12px; font-size:.85rem; opacity:.7; text-align:center}
    .intro{font-size:1rem}
    .divider{height:1px;background:#eee;margin:14px 0}
  </style>
</head>
<body>
<div class="wrap">
  <!-- LOGO -->
  <img src="https://raw.githubusercontent.com/angela-pounder/first-test-codex/main/Clydeside%20Social%20-%20Logo%20REFRESH_Inline%20-%20B%26P%20-%20White%20DS%20-%20NO%20BG.png" alt="Clydeside Social logo" class="logo">

  <div class="card">
    <h1>Instagram Engagement Toolkit</h1>
    <p class="intro">
      Pop in your numbers for a single post, then get a quick monthly snapshot.
      I’ll give you friendly tips based on your results. Nothing is saved - your data stays in your browser.
    </p>
  </div>

  <!-- Post calculator -->
  <div class="card" id="postCard">
    <h2>Post Engagement Rate</h2>
    <label>Post type:</label>
    <select id="postType">
      <option value="single">Single image</option>
      <option value="carousel">Carousel</option>
      <option value="reel">Reel</option>
      <option value="video">Video</option>
    </select>

    <label>Followers:</label>
    <input type="number" id="followers" min="0"/>
    <label>Likes:</label>
    <input type="number" id="likes" min="0"/>
    <label>Comments:</label>
    <input type="number" id="comments" min="0"/>

    <button id="postCalcBtn">Calculate</button>
    <div id="postResult" aria-live="polite"></div>
    <p id="postBenchmark" class="benchmark"></p>
    <p id="postTip" class="muted"></p>
    <div class="actions">
      <button type="button" onclick="copyText('post')">Copy results</button>
    </div>
  </div>

  <!-- Monthly snapshot -->
  <div class="card" id="monthCard">
    <h2>Monthly Snapshot</h2>
    <label>Followers at start of month:</label>
    <input type="number" id="followersStart" min="0"/>
    <label>Followers at end of month:</label>
    <input type="number" id="followersEnd" min="0"/>
    <label>Posts published this month:</label>
    <input type="number" id="posts" min="0"/>

    <button id="monthCalcBtn">Calculate snapshot</button>
    <div id="monthResult" aria-live="polite"></div>
    <p id="monthTip" class="muted"></p>
    <div class="actions">
      <button type="button" onclick="copyText('month')">Copy results</button>
      <button type="button" onclick="downloadPDFCombined()">Download combined PDF</button>
    </div>
  </div>

  <footer>© Clydeside Social • Built with Codex</footer>
</div>

<!-- jsPDF for PDF export -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  // Simple picker
  const pick = arr => arr[Math.floor(Math.random()*arr.length)];

  // Tip banks in simple language (your tweak included)
  const tips = {
    low: [
      "Don’t worry if this one fell a bit flat - try again with a different image or photo",
      "Ask a question at the end of your caption so people reply",
      "Share a quick tip as a carousel so people save it",
      "Post at a time you know your followers are online",
      "Use a Reel with a trending sound to reach new people"
    ],
    medium: [
      "This is fine - now try making the hook in your caption stronger",
      "Add a poll or quiz in Stories to get more people talking",
      "Try posting a Reel and a carousel on the same topic",
      "Share a tip that starts with Save this for later",
      "Keep posting 2 to 3 times a week so you stay consistent"
    ],
    high: [
      "Well done - this one worked, do more like it",
      "Pin this post to the top of your profile for extra views",
      "Repurpose it into another format, like a Reel or carousel",
      "Post a follow up answering comments or questions",
      "Turn it into a tip series so people come back for more"
    ]
  };

  // State to reuse in PDF
  let postState = { text:"", bench:"", tip:"" };
  let monthState = { text:"", tip:"" };

  // POST: calc + tip + benchmark
  document.getElementById('postCalcBtn').addEventListener('click', function(){
    const followers = +document.getElementById('followers').value || 0;
    const likes = +document.getElementById('likes').value || 0;
    const comments = +document.getElementById('comments').value || 0;
    const postType = (document.getElementById('postType').value||'single').toLowerCase();

    const out = document.getElementById('postResult');
    const bench = document.getElementById('postBenchmark');
    const tipEl = document.getElementById('postTip');

    if(!followers){
      out.innerText = "Please enter follower count.";
      bench.innerText = ""; tipEl.innerText = "";
      postState = { text: out.innerText, bench:"", tip:"" };
      return;
    }

    const er = ((likes+comments)/followers)*100;
    out.innerText = "Engagement rate: " + er.toFixed(2) + "%";

    if (er < 1) bench.innerText = "Below the typical 1-3% range.";
    else if (er <= 3) bench.innerText = "Around the typical 1-3% range.";
    else bench.innerText = "Above the typical 1-3% range - nice!";

    // Build smart tips and avoid suggesting same format they used
    const formats = {
      single: ["Test a carousel this week.", "Try a short Reel."],
      carousel: ["Try a short Reel with the same topic.", "Repurpose the best slide as a standalone tip."],
      reel: ["Turn this into a carousel with 5 to 7 slides.", "Add a checklist as a static post."],
      video: ["Cut a 15 to 30s Reel.", "Turn key moments into a carousel."]
    };

    let pool = [];
    if (er < 1) pool = tips.low.concat(formats[postType]||[]);
    else if (er < 3) pool = tips.medium.concat(formats[postType]||[]);
    else pool = tips.high.concat(formats[postType]||[]);

    // filter out suggesting the same format they already used
    pool = pool.filter(t=>{
      if (postType==='carousel' && /carousel/i.test(t)) return false;
      if (postType==='reel' && /reel/i.test(t)) return false;
      if (postType==='single' && /single|static/i.test(t)) return false;
      return true;
    });

    const tip = pick(pool);
    tipEl.innerText = tip;

    postState = { text: out.innerText, bench: bench.innerText, tip };
  });

  // MONTH: calc + tips
  document.getElementById('monthCalcBtn').addEventListener('click', function(){
    const start = +document.getElementById('followersStart').value || 0;
    const end = +document.getElementById('followersEnd').value || 0;
    const posts = +document.getElementById('posts').value || 0;

    const out = document.getElementById('monthResult');
    const tipEl = document.getElementById('monthTip');

    if(!start){
      out.innerText = "Followers start cannot be zero.";
      tipEl.innerText = "";
      monthState = { text: out.innerText, tip:"" };
      return;
    }

    const growth = ((end-start)/start)*100;
    const perWeek = posts/4.3;
    const projected = Math.round(perWeek*4.3);

    out.innerText =
      "Growth rate: " + growth.toFixed(2) + "%\n" +
      "Consistency: " + perWeek.toFixed(1) + " posts per week\n" +
      "Projected next month: ~" + projected + " posts";

    let notes = [];
    if (growth < 0) notes.push("Followers dipped - re engage warm audiences.");
    else if (growth < 1) notes.push("Flat growth - try one extra weekly post or a collab.");
    else if (growth < 3) notes.push("Nice steady growth.");
    else notes.push("Strong growth - keep it up.");

    if (perWeek < 2) notes.push("Consistency is low. Aim for about 3 posts per week.");
    else if (perWeek < 3) notes.push("Nearly there - try scheduling one more post.");
    else notes.push("Consistency on point - schedule next month now.");

    const tip = notes.join(" ");
    tipEl.innerText = tip;

    monthState = { text: out.innerText, tip };
  });

  // Copy helpers
  function copyText(which){
    const text = which==='post'
      ? [postState.text, postState.bench, postState.tip].filter(Boolean).join("\n")
      : [monthState.text, monthState.tip].filter(Boolean).join("\n");
    navigator.clipboard.writeText(text).then(()=>alert("Results copied"));
  }

  // Combined PDF: logo + pink headings + both sections + footer
  async function downloadPDFCombined(){
    // If user forgot to calculate, trigger both
    if(!postState.text) document.getElementById('postCalcBtn').click();
    if(!monthState.text) document.getElementById('monthCalcBtn').click();

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // try to load logo; if it fails, continue without
    const addReport = () => {
      // Header
      doc.setFont("helvetica","bold

