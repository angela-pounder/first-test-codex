<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clydeside Social - Instagram Calculator</title>

  <style>
    body {
      font-family: "Arial Rounded MT Bold", Arial, sans-serif;
      background-color: #fdfdfd;
      color: #333;
      text-align: center;
      padding: 20px;
    }
    h1 {
      color: #ff6680; /* brand pink */
    }
    .section {
      background: #fff;
      border: 2px solid #ff6680;
      border-radius: 12px;
      padding: 20px;
      margin: 20px auto;
      max-width: 500px;
      box-shadow: 0px 4px 8px rgba(0,0,0,0.05);
    }
    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }
    input {
      padding: 8px;
      width: 80%;
      margin-bottom: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background-color: #ff6680;
      color: white;
      border: none;
      padding: 10px 20px;
      margin-top: 10px;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #e05570;
    }
    .results {
      margin-top: 15px;
      font-size: 14px;
      color: #333;
    }
    /* Toast Notification */
    #toast {
      visibility: hidden;
      min-width: 200px;
      margin-left: -100px;
      background-color: #ff6680; /* brand pink */
      color: #fff;
      text-align: center;
      border-radius: 8px;
      padding: 12px;
      position: fixed;
      z-index: 1000;
      left: 50%;
      bottom: 30px;
      font-size: 14px;
      opacity: 0;
      transition: opacity 0.5s, bottom 0.5s;
    }
    #toast.show {
      visibility: visible;
      opacity: 1;
      bottom: 50px;
    }
  </style>
</head>
<body>

  <img src="https://raw.githubusercontent.com/angela-pounder/first-test-codex/main/Clydeside%20Social%20-%20Logo%20REFRESH_Inline%20-%20B%26P%20-%20White%20DS%20-%20NO%20BG.png" alt="Clydeside Social Logo" width="220" style="margin-bottom:20px;">

  <h1>Instagram Engagement & Growth Calculator</h1>

  <!-- Post Calculator -->
  <div class="section">
    <h2>Post Engagement</h2>
    <label>Likes:</label>
    <input type="number" id="likes">
    <label>Comments:</label>
    <input type="number" id="comments">
    <label>Followers:</label>
    <input type="number" id="followers">
    <button onclick="calculateEngagement()">Calculate Engagement</button>
    <div class="results" id="engagementResult"></div>
  </div>

  <!-- Monthly Snapshot -->
  <div class="section">
    <h2>Monthly Snapshot</h2>
    <label>Posts this month:</label>
    <input type="number" id="postsMonth">
    <label>Total likes this month:</label>
    <input type="number" id="likesMonth">
    <label>Followers at start of month:</label>
    <input type="number" id="followersStart">
    <label>Followers now:</label>
    <input type="number" id="followersEnd">
    <button onclick="calculateMonthly()">Calculate Monthly Snapshot</button>
    <div class="results" id="monthlyResult"></div>
  </div>

  <button onclick="downloadPDFCombined()">Download PDF Report</button>

  <!-- Toast -->
  <div id="toast"></div>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    let postState = { text: "", bench: "", tip: "" };
    let monthState = { text: "", tip: "" };

    // Toast messages
    const toastMessages = [
      "âœ… Your PDF is ready!",
      "ðŸŽ‰ Report saved successfully!",
      "ðŸ“Š Your Insta report has downloaded",
      "ðŸ‘Œ PDF created - check your downloads",
      "ðŸ’¾ Saved! Your report is on your computer"
    ];

    // Tips
    const tipsLow = [
      "Donâ€™t worry if this one fell a bit flat - try again with a different image or photo",
      "Ask a question at the end of your caption so people reply",
      "Share a quick tip as a carousel so people save it",
      "Post at a time you know your followers are online",
      "Use a Reel with a trending sound to reach new people"
    ];
    const tipsMed = [
      "This is fine - now try making the hook in your caption stronger",
      "Add a poll or quiz in Stories to get more people talking",
      "Try posting a Reel and a carousel on the same topic",
      "Share a tip that starts with Save this for later",
      "Keep posting 2 to 3 times a week so you stay consistent"
    ];
    const tipsHigh = [
      "Well done - this one worked, do more like it",
      "Pin this post to the top of your profile for extra views",
      "Repurpose it into another format, like a Reel or carousel",
      "Post a follow up answering comments or questions",
      "Turn it into a tip series so people come back for more"
    ];

    function randomItem(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    function calculateEngagement(){
      const likes = parseInt(document.getElementById("likes").value) || 0;
      const comments = parseInt(document.getElementById("comments").value) || 0;
      const followers = parseInt(document.getElementById("followers").value) || 0;
      if(followers === 0){ alert("Add followers number!"); return; }
      const engagementRate = ((likes + comments)/followers)*100;

      let bench="", tip="";
      if(engagementRate < 1) { bench="Below average"; tip=randomItem(tipsLow); }
      else if(engagementRate < 3) { bench="Around average"; tip=randomItem(tipsMed); }
      else { bench="Above average"; tip=randomItem(tipsHigh); }

      postState.text=`Engagement Rate: ${engagementRate.toFixed(2)}%`;
      postState.bench=`This is ${bench}.`;
      postState.tip=`Action tip: ${tip}`;

      document.getElementById("engagementResult").innerHTML =
        `${postState.text}<br>${postState.bench}<br>${postState.tip}`;
    }

    function calculateMonthly(){
      const posts = parseInt(document.getElementById("postsMonth").value) || 0;
      const likes = parseInt(document.getElementById("likesMonth").value) || 0;
      const start = parseInt(document.getElementById("followersStart").value) || 0;
      const end = parseInt(document.getElementById("followersEnd").value) || 0;
      if(start === 0){ alert("Add start followers!"); return; }
      const growthRate = ((end-start)/start)*100;

      monthState.text = `Posts: ${posts}, Likes: ${likes}, Growth: ${growthRate.toFixed(2)}%`;
      monthState.tip = growthRate > 0
        ? "Great - your account is growing"
        : "Keep going - try posting more Reels or carousels";

      document.getElementById("monthlyResult").innerHTML =
        `${monthState.text}<br>${monthState.tip}`;
    }

    async function downloadPDFCombined(){
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Logo
      const logoUrl = "https://raw.githubusercontent.com/angela-pounder/first-test-codex/main/Clydeside%20Social%20-%20Logo%20REFRESH_Inline%20-%20B%26P%20-%20White%20DS%20-%20NO%20BG.png";
      try {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.src = logoUrl;
        await new Promise(res => { img.onload=res; img.onerror=res; });
        if (img.naturalWidth) {
          doc.addImage(img, "PNG", 80, 10, 50, 20);
        }
      } catch(e) { console.warn("Logo failed to load, skipping."); }

      // Heading
      doc.setFont("helvetica","bold");
      doc.setTextColor(255, 102, 127);
      doc.setFontSize(18);
      doc.text("Instagram Results Report", 20, 45);

      // Post results
      doc.setTextColor(0,0,0);
      doc.setFontSize(14);
      doc.text("Post Engagement", 20, 60);
      doc.setFontSize(12);
      const postBlock = [postState.text, postState.bench, postState.tip].filter(Boolean).join("\n");
      doc.text(doc.splitTextToSize(postBlock || "No post data calculated.", 170), 20, 68);

      // Monthly results
      doc.setFontSize(14);
      doc.text("Monthly Snapshot", 20, 110);
      doc.setFontSize(12);
      const monthBlock = [monthState.text, monthState.tip].filter(Boolean).join("\n");
      doc.text(doc.splitTextToSize(monthBlock || "No monthly data calculated.", 170), 20, 118);

      // Footer
      doc.setFontSize(10);
      doc.setTextColor(120);
      doc.text("Â© Clydeside Social", 20, 285);

      doc.save("Clydeside_Social_Instagram_Report.pdf");

      // Random toast
      const toast = document.getElementById("toast");
      toast.textContent = randomItem(toastMessages);
      toast.className = "show";
      setTimeout(() => { toast.className = toast.className.replace("show", ""); }, 3000);
    }
  </script>
</body>
</html>


