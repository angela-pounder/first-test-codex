<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clydeside Social • Instagram Toolkit</title>
  <style>
    :root{
      --pink:#ff6680;
      --blue:#a9dde8;
      --text:#333;
      --card:#fff;
      --radius:12px;
      --shadow:0 6px 16px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    body{
      font-family:"Arial Rounded MT Bold", Arial, sans-serif;
      background:var(--blue);
      color:var(--text);
      margin:0; padding:24px;
      display:flex; justify-content:center;
    }
    .wrap{max-width:720px; width:100%}
    .logo{max-width:180px; display:block; margin:0 auto 12px}
    h1{color:var(--pink); text-align:center; margin:0 0 18px}
    .card{
      background:var(--card);
      border:2px solid var(--pink);
      border-radius:var(--radius);
      padding:20px;
      margin:18px 0;
      box-shadow:var(--shadow);
      text-align:left;
    }
    .card h2{margin:0 0 10px; color:#222}
    label{display:block; font-weight:bold; margin:10px 0 6px}
    input, select{
      width:100%; padding:10px; border:1px solid #ddd; border-radius:10px;
    }
    button{
      margin-top:12px; padding:10px 14px; width:100%;
      border:0; border-radius:999px; cursor:pointer;
      background:linear-gradient(135deg, var(--pink), #6680ff);
      color:#fff; font-weight:bold;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
    }
    button:hover{filter:brightness(1.04)}
    .muted,.bench{font-size:.95rem; opacity:.85; margin-top:6px; white-space:pre-line}
    .result{margin-top:10px; font-weight:bold; color:var(--pink); white-space:pre-line}
    .actions{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .actions button{width:auto; padding:9px 12px}
    footer{margin:8px 0 0; text-align:center; font-size:.85rem; opacity:.7}
    /* Toast */
    #toast{
      visibility:hidden; min-width:240px; margin-left:-120px;
      background:#333; color:#fff; text-align:center; border-radius:8px;
      padding:12px; position:fixed; z-index:9999; left:50%; bottom:28px;
      font-size:14px; opacity:0; transition:opacity .4s, bottom .4s;
    }
    #toast.show{visibility:visible; opacity:1; bottom:48px}
  </style>
</head>
<body>
  <div class="wrap">
    <img class="logo" src="https://raw.githubusercontent.com/angela-pounder/first-test-codex/main/Clydeside%20Social%20-%20Logo%20REFRESH_Inline%20-%20B%26P%20-%20White%20DS%20-%20NO%20BG.png" alt="Clydeside Social logo">
    <h1>Instagram Engagement & Monthly Snapshot</h1>

    <!-- Post Engagement -->
    <div class="card" id="postCard">
      <h2>Post engagement</h2>

      <label>Post type</label>
      <select id="postType">
        <option value="single">Single image</option>
        <option value="carousel">Carousel</option>
        <option value="reel">Reel</option>
        <option value="video">Video</option>
      </select>

      <label>Followers</label>
      <input type="number" id="followers" min="0" placeholder="e.g. 2500">

      <label>Likes</label>
      <input type="number" id="likes" min="0" placeholder="e.g. 120">

      <label>Comments</label>
      <input type="number" id="comments" min="0" placeholder="e.g. 14">

      <button id="postCalcBtn" type="button">Calculate engagement</button>
      <div id="postResult" class="result"></div>
      <p id="postBench" class="bench"></p>
      <p id="postTip" class="muted"></p>

      <div class="actions">
        <button type="button" onclick="copyOut('post')">Copy</button>
      </div>
    </div>

    <!-- Monthly Snapshot (start + end + posts) -->
    <div class="card" id="monthCard">
      <h2>Monthly snapshot</h2>

      <label>Followers at start of month</label>
      <input type="number" id="fStart" min="0" placeholder="e.g. 2400">

      <label>Followers at end of month</label>
      <input type="number" id="fEnd" min="0" placeholder="e.g. 2550">

      <label>Posts published this month</label>
      <input type="number" id="posts" min="0" placeholder="e.g. 12">

      <button id="monthCalcBtn" type="button">Calculate snapshot</button>
      <div id="monthResult" class="result"></div>
      <p id="monthTip" class="muted"></p>

      <div class="actions">
        <button type="button" onclick="copyOut('month')">Copy</button>
        <button type="button" onclick="downloadPDF()">Download branded PDF</button>
      </div>
    </div>

    <footer>© Clydeside Social • Built with Codex</footer>
  </div>

  <!-- Toast -->
  <div id="toast">Done</div>

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const pick = arr => arr[Math.floor(Math.random()*arr.length)];

    // Action tips (simple language)
    // --- Micro feedback helpers ---
const pick = arr => arr[Math.floor(Math.random()*arr.length)];
const lines = arr => arr.filter(Boolean).join("\n");

// Optional “streak” nudge using localStorage
function streakNudge() {
  try {
    const key = "cs_toolkit_uses_" + new Date().toISOString().slice(0,7); // YYYY-MM
    const n = parseInt(localStorage.getItem(key) || "0", 10) + 1;
    localStorage.setItem(key, String(n));
    if (n >= 2) return `Nice — you’re building a habit. You’ve checked in ${n} times this month.`;
  } catch(e) {}
  return "";
}

// Micro‑tip banks
const tipBanks = {
  starter: [
    "Ask a question in your caption so people reply",
    "Use a clearer or brighter main image",
    "Try a short Reel with a trending sound",
    "Post at a time your audience is online",
    "Share a quick tip they will want to save"
  ],
  hook: [
    "Open with a strong hook — promise the result in the first line",
    "Make slide 1 super clear — one simple idea",
    "Front‑load value — give the best tip early"
  ],
  cta: [
    "End with a simple call to action like Save this for later",
    "Ask people to comment with a number or emoji",
    "Invite DMs with a clear next step"
  ],
  format: {
    single: [
      "Try a carousel on the same topic",
      "Turn the post into a 15 to 30s Reel"
    ],
    carousel: [
      "Test the same idea as a short Reel",
      "Turn the best slide into a single image post"
    ],
    reel: [
      "Repurpose it into a 5 to 7 slide carousel",
      "Add a checklist as a static post"
    ],
    video: [
      "Cut a short Reel from the best moment",
      "Slice key moments into a carousel"
    ]
  },
  monthLowPosts: [
    "Aim for about 3 posts per week — batch and schedule",
    "Block 1 hour to plan next week’s 3 posts"
  ],
  monthOkPosts: [
    "Nearly there — add one extra post next week",
    "Try a collab or shout‑out to tap a new audience"
  ],
  monthStrongPosts: [
    "Great rhythm — pre‑schedule next week today",
    "Start a simple series so people come back"
  ],
  monthGrowthUp: [
    "Growth looks good — repeat the topics that worked",
    "Try boosting a top post for £5–£10 to widen reach"
  ],
  monthGrowthFlat: [
    "Flat growth — test one new format this week",
    "Do a Story poll to spark replies"
  ],
  monthGrowthDown: [
    "Dipped a bit — re‑engage warm followers in Stories",
    "Share a behind‑the‑scenes post to rebuild trust"
  ]
};

    // State for PDF/copy
    let postState = { text:"", bench:"", tip:"" };
    let monthState = { text:"", tip:"" };

    // POST: calculate + tip
    document.getElementById('postCalcBtn').addEventListener('click', function(){
  const followers = +document.getElementById('followers').value || 0;
  const likes = +document.getElementById('likes').value || 0;
  const comments = +document.getElementById('comments').value || 0;
  const postType = (document.getElementById('postType').value || 'single').toLowerCase();

  const out = document.getElementById('postResult');
  const bench = document.getElementById('postBench');
  const tipEl = document.getElementById('postTip');

  if(!followers){
    out.innerText = "Please add follower count.";
    bench.innerText=""; tipEl.innerText="";
    postState = { text: out.innerText, bench:"", tip:"" };
    return;
  }

  // zero interactions
  if ((likes + comments) === 0){
    out.innerText = "Engagement rate: 0.00%";
    bench.innerText = "Below the typical 1–3% range.";
    const micro = [
      pick(tipBanks.starter),
      pick(tipBanks.hook),
      streakNudge()
    ];
    tipEl.innerText = lines(micro);
    postState = { text: out.innerText, bench: bench.innerText, tip: tipEl.innerText };
    return;
  }

  const er = ((likes + comments) / followers) * 100;
  out.innerText = "Engagement rate: " + er.toFixed(2) + "%";

  if (er < 1) bench.innerText = "Below the typical 1–3% range.";
  else if (er <= 3) bench.innerText = "Around the typical 1–3% range.";
  else bench.innerText = "Above the typical 1–3% range — nice!";

  // Build 2–3 micro tips and avoid suggesting the same format they used
  let formatIdeas = (tipBanks.format[postType] || []).filter(t=>{
    if (postType==='carousel' && /carousel/i.test(t)) return false;
    if (postType==='reel' && /reel/i.test(t)) return false;
    if (postType==='single' && /single|static/i.test(t)) return false;
    return true;
  });

  const micro = [];
  if (er < 1) micro.push(pick(tipBanks.starter));
  else if (er < 3) micro.push(pick(tipBanks.hook));
  else micro.push("Well done — double down on this topic and style");

  micro.push(pick(formatIdeas.length ? formatIdeas : tipBanks.hook));
  micro.push(pick(tipBanks.cta));
  micro.push(streakNudge());

  tipEl.innerText = lines(micro.slice(0,3)); // keep it short

  postState = { text: out.innerText, bench: bench.innerText, tip: tipEl.innerText };
});


      // zero interactions
      if ((likes + comments) === 0){
        out.innerText = "Engagement rate: 0.00%";
        bench.innerText = "Below the typical 1-3% range.";
        const starter = [
          "Ask a question so people reply",
          "Use a clearer main image",
          "Try a short Reel with a trending sound",
          "Post at a time your audience is online",
          "Share a tip people will want to save"
        ];
        const tip = pick(starter);
        tipEl.innerText = tip;
        postState = { text: out.innerText, bench: bench.innerText, tip };
        return;
      }

      const er = ((likes + comments) / followers) * 100;
      out.innerText = "Engagement rate: " + er.toFixed(2) + "%";

      if (er < 1) bench.innerText = "Below the typical 1-3% range.";
      else if (er <= 3) bench.innerText = "Around the typical 1-3% range.";
      else bench.innerText = "Above the typical 1-3% range - nice!";

      // avoid suggesting same format they used
      const formatIdeas = {
        single: ["Try a carousel this week.", "Post a short Reel on the same topic."],
        carousel: ["Post a short Reel with the same idea.", "Turn the best slide into a single post."],
        reel: ["Turn this into a 5 to 7 slide carousel.", "Add a checklist as a static post."],
        video: ["Cut a 15 to 30s Reel.", "Turn key moments into a carousel."]
      };

      let pool = [];
      if (er < 1) pool = tipsLow.concat(formatIdeas[postType] || []);
      else if (er < 3) pool = tipsMed.concat(formatIdeas[postType] || []);
      else pool = tipsHigh.concat(formatIdeas[postType] || []);

      pool = pool.filter(t=>{
        if (postType==='carousel' && /carousel/i.test(t)) return false;
        if (postType==='reel' && /reel/i.test(t)) return false;
        if (postType==='single' && /single|static/i.test(t)) return false;
        return true;
      });

      const tip = pick(pool);
      tipEl.innerText = tip;

      postState = { text: out.innerText, bench: bench.innerText, tip };
    });

    // MONTH: followers start/end + posts
  document.getElementById('monthCalcBtn').addEventListener('click', function(){
  const start = +document.getElementById('fStart').value || 0;
  const end = +document.getElementById('fEnd').value || 0;
  const posts = +document.getElementById('posts').value || 0;

  const out = document.getElementById('monthResult');
  const tipEl = document.getElementById('monthTip');

  if(!start){
    out.innerText = "Followers start cannot be zero.";
    tipEl.innerText = "";
    monthState = { text: out.innerText, tip:"" };
    return;
  }

  const growth = ((end - start) / start) * 100;
  const perWeek = posts / 4.3;
  const projected = Math.round(perWeek * 4.3);

  out.innerText =
    "Growth rate: " + growth.toFixed(2) + "%\n" +
    "Consistency: " + perWeek.toFixed(1) + " posts per week\n" +
    "Projected next month: ~" + projected + " posts";

  // Growth mood
  let mood;
  if (growth < 0) mood = pick(tipBanks.monthGrowthDown);
  else if (growth < 1) mood = pick(tipBanks.monthGrowthFlat);
  else mood = pick(tipBanks.monthGrowthUp);

  // Consistency nudge
  let nudge;
  if (posts === 0) nudge = "No posts this month — aim for at least 1 to 2 per week.";
  else if (perWeek < 2) nudge = pick(tipBanks.monthLowPosts);
  else if (perWeek < 3) nudge = pick(tipBanks.monthOkPosts);
  else nudge = pick(tipBanks.monthStrongPosts);

  const micro = [mood, nudge, streakNudge()];
  tipEl.innerText = lines(micro.slice(0,3));

  monthState = { text: out.innerText, tip: tipEl.innerText };
});


    // Copy
    function copyOut(which){
      const text = which==='post'
        ? [postState.text, postState.bench, postState.tip].filter(Boolean).join("\n")
        : [monthState.text, monthState.tip].filter(Boolean).join("\n");
      if (!text.trim()) { showToast("Calculate first"); return; }
      navigator.clipboard.writeText(text).then(()=>showToast("Copied"));
    }

    // Toast
    function showToast(msg="Done"){
      const t=document.getElementById('toast');
      t.textContent=msg;
      t.className='show';
      setTimeout(()=>t.className=t.className.replace('show',''),3000);
    }

    // Branded PDF (both sections)
    function downloadPDF(){
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      // Logo (best-effort; skip if it fails)
      try{
        doc.addImage(
  "https://raw.githubusercontent.com/angela-pounder/first-test-codex/main/Clydeside%20Social%20-%20Logo%20REFRESH_Inline%20-%20B%26P%20-%20White%20DS%20-%20NO%20BG.png",
  "PNG",
  70, 10, 70, 70
);

      }catch(e){}

      // Title
      doc.setFont("helvetica","bold");
      doc.setTextColor(255,102,128); // pink
      doc.setFontSize(18);
      doc.text("Instagram Results Report", 20, 36);

      // Section: Post
      doc.setFillColor(169,221,232); // blue bar
      doc.rect(20, 44, 170, 10, "F");
      doc.setTextColor(0,0,0);
      doc.setFontSize(14);
      doc.text("Post engagement", 22, 51);

      const postBlock = [postState.text, postState.bench, postState.tip]
        .filter(Boolean).join("\n") || "No post data calculated.";
      doc.setFontSize(12);
      doc.text(doc.splitTextToSize(postBlock, 170), 22, 64);

      // Section: Month
      doc.setFillColor(169,221,232);
      doc.rect(20, 110, 170, 10, "F");
      doc.setFontSize(14);
      doc.text("Monthly snapshot", 22, 117);

      const monthBlock = [monthState.text, monthState.tip]
        .filter(Boolean).join("\n") || "No monthly data calculated.";
      doc.setFontSize(12);
      doc.text(doc.splitTextToSize(monthBlock, 170), 22, 130);

      // Footer
      doc.setFontSize(10);
      doc.setTextColor(100);
      doc.text("© Clydeside Social", 20, 285);

      doc.save("Clydeside_Social_Instagram_Report.pdf");
      showToast("PDF downloaded");
    }
  </script>
</body>
</html>




